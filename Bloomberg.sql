-- drop database ticker_ohlctech;
CREATE DATABASE ticker_OHLCTECH;
USE ticker_OHLCTECH;
drop table stocks_firstOHLC;
CREATE TABLE stocks_firstOHLC (
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    PX_OPEN DOUBLE DEFAULT NULL,
    PX_HIGH DOUBLE DEFAULT NULL,
    PX_LOW DOUBLE DEFAULT NULL,
    PX_CLOSE DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock)
);

SELECT * FROM stocks_firstOHLC;
-- drop table stocks_firstTECH;
CREATE TABLE stocks_firstTECH (
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    ATR DOUBLE DEFAULT NULL,
    BB_MA DOUBLE DEFAULT NULL,
    BB_UPPER DOUBLE DEFAULT NULL,
    BB_LOWER DOUBLE DEFAULT NULL,
    BB_WIDTH DOUBLE DEFAULT NULL,
    BB_PERCENT DOUBLE DEFAULT NULL,
    CMCI DOUBLE DEFAULT NULL,
    DMI_PLUS DOUBLE DEFAULT NULL,
    DMI_MINUS DOUBLE DEFAULT NULL,
    ADX DOUBLE DEFAULT NULL,
    ADXR DOUBLE DEFAULT NULL,
    EMAVG DOUBLE DEFAULT NULL,
    FEAR_GREED DOUBLE DEFAULT NULL,
    HURST DOUBLE DEFAULT NULL,
    MIN DOUBLE DEFAULT NULL,
    MAX DOUBLE DEFAULT NULL,
    MM_RETRACEMENT DOUBLE DEFAULT NULL,
    MOMENTUM DOUBLE DEFAULT NULL,
    MOM_MA DOUBLE DEFAULT NULL,
    MACD DOUBLE DEFAULT NULL,
    MACD_SIGNAL DOUBLE DEFAULT NULL,
    MACD_DIFF DOUBLE DEFAULT NULL,
    MAE_MIDDLE DOUBLE DEFAULT NULL,
    MAE_UPPER DOUBLE DEFAULT NULL,
    MAE_LOWER DOUBLE DEFAULT NULL,
    MAOsc DOUBLE DEFAULT NULL,
    MAO_SIGNAL DOUBLE DEFAULT NULL,
    MAO_DIFF DOUBLE DEFAULT NULL,
    PTPS DOUBLE DEFAULT NULL,
    ROC DOUBLE DEFAULT NULL,
    RSI DOUBLE DEFAULT NULL,
    SMAVG DOUBLE DEFAULT NULL,
    TAS_K DOUBLE DEFAULT NULL,
    TAS_D DOUBLE DEFAULT NULL,
    TAS_DS DOUBLE DEFAULT NULL,
    TAS_DSS DOUBLE DEFAULT NULL,
    TRENDER_UP DOUBLE DEFAULT NULL,
    TRENDER_DN DOUBLE DEFAULT NULL,
    TMAVG DOUBLE DEFAULT NULL,
    VMAVG DOUBLE DEFAULT NULL,
    WMAVG DOUBLE DEFAULT NULL,
    WLPR DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock),
    FOREIGN KEY (Dates , Stock)
        REFERENCES stocks_firstOHLC (Dates , Stock)
);

-- uncomment the following codes, change the path and read the csv file if necessary

/*LOAD DATA INFILE "D:/FYP/Bloomberg data/ticker1(OHLC)_separate.csv"
  INTO TABLE stocks_firstOHLC
  fields terminated BY ',' lines terminated BY '\n'IGNORE 1 LINES;
  
LOAD DATA INFILE "D:/FYP/Bloomberg data/ticker1(TECH)_separate.csv"
  INTO TABLE stocks_firstTECH
  fields terminated BY ',' lines terminated BY '\n'IGNORE 1 LINES;*/
 
-- below are the dummy data, uncomment to try
/*INSERT INTO `stocks_firstOHLC` VALUES ('22/6/2000','CRL US EQUITY',	16,	16,	16,	16);
INSERT INTO `stocks_firstOHLC` VALUES ('23/6/2000',	'CRL US EQUITY', 19.5, 23.625, 18.5, 22);
INSERT INTO `stocks_firstOHLC` VALUES ('26/6/2000',	'CRL US EQUITY', 21.75,	21.875,	20.875,	21.875);
INSERT INTO `stocks_firstOHLC` VALUES ('27/6/2000',	'CRL US EQUITY', 21.9375, 21.9375, 21.125, 21.5625);
INSERT INTO `stocks_firstOHLC` VALUES ('28/6/2000',	'CRL US EQUITY', 21.625, 21.6875, 20.625, 21.5625);
INSERT INTO `stocks_firstOHLC` VALUES ('29/6/2000',	'CRL US EQUITY', 21.5, 21.5, 21.1875, 21.1875);
INSERT INTO `stocks_firstOHLC` VALUES ('30/6/2000',	'CRL US EQUITY', 21.1875, 22.75, 20.875, 22.1875);

select * from stocks_firstOHLC;

INSERT INTO `stocks_firstTECH` VALUES ('22/6/2000',	'CRL US EQUITY',	0,	23.490625,	26.39328407,
	20.58796593,	24.71334051,	0.620040794,	166.0464085,	52.44755245,	3.03030303,	
    76.25631159,	61.16674086,	16,	4.465544872,	0.498697698,	16,	26.875,	21.4375,
	7.625,	4.35,	0,	0,	0,	23.18333333,	23.87883333,	22.48783333,	5.602430556,
	5.602430556,	0,	16,	34.765625,	89.80582524,	20.6,	78.73563218,	77.95884562,
	85.09555748,	86.83106035,	19.15884574,	32.31592593,	21.14583333,	33.0625,
	21.3125,	-18.3908046);
    
INSERT INTO `stocks_firstTECH` VALUES ('23/6/2000',	'CRL US EQUITY',	2.541666667,	23.490625,
	26.39328407,	20.58796593,	24.71334051,	0.620040794,	166.0464085,	52.44755245,
	3.03030303,	76.25631159,	61.16674086,	18,	4.465544872,	0.498697698,	16,	26.875,
	21.4375,	7.625,	4.35,	0.478632479,	0.095726496,	0.382905983,	23.18333333,
	23.87883333,	22.48783333,	5.602430556,	5.602430556,	0,	16,	34.765625,	89.80582524,
    20.6,	78.73563218,	77.95884562,	85.09555748,	86.83106035,	19.15884574,	
    32.31592593,	21.14583333,	33.0625,	21.3125,	-18.3908046);
    
INSERT INTO `stocks_firstTECH` VALUES ('26/6/2000',	'CRL US EQUITY',	2.069444444,	23.490625,
	26.39328407,	20.58796593,	24.71334051,	0.620040794,	166.0464085,	52.44755245,
	3.03030303,	76.25631159,	61.16674086,	19.29166667,	4.465544872,	0.498697698,	16,
	26.875,	21.4375,	7.625,	4.35,	0.838203424,	0.244221881,	0.593981542,	23.18333333,
	23.87883333,	22.48783333,	5.602430556,	5.602430556,	0,	16,	34.765625,	89.80582524,
	20.6,	78.73563218,	77.95884562,	85.09555748,	86.83106035,	19.15884574,	
    32.31592593,	21.14583333,	33.0625,	21.3125,	-18.3908046);
    
INSERT INTO `stocks_firstTECH` VALUES ('27/6/2000',	'CRL US EQUITY',	1.650462963,	23.490625,
	26.39328407,	20.58796593,	24.71334051,	0.620040794,	166.0464085,	52.44755245,
	3.03030303,	76.25631159,	61.16674086,	20.04861111,	4.465544872,	0.498697698,	16,
	26.875,	21.4375,	7.625,	4.35,	1.085437601,	0.412465025,	0.672972576,	23.18333333,
	23.87883333,	22.48783333,	5.602430556,	5.602430556,	0,	16.305,	34.765625,	
    89.80582524,	20.6,	78.73563218,	77.95884562,	85.09555748,	86.83106035, 19.15884574,
	32.31592593,	21.14583333,	33.0625, 21.3125,	-18.3908046);
    
INSERT INTO `stocks_firstTECH` VALUES ('28/6/2000',	'CRL US EQUITY',	1.454475309,	23.490625,
	26.39328407,	20.58796593,	24.71334051,	0.620040794, 166.0464085,	52.44755245,
	3.03030303,	76.25631159,	61.16674086,	20.55324074,	4.465544872,	0.498697698,	16,
	26.875,	21.4375,	7.625,	4.35, 1.266769932,	0.583326007,	0.683443926,	23.18333333,
	23.87883333,	22.48783333,	5.602430556,	5.602430556,	0,	16.5978,	34.765625,	
    89.80582524,	20.6,	78.73563218,	77.95884562,	85.09555748,	86.83106035,	
    19.15884574,	32.31592593,	21.14583333,	33.0625,	21.3125,	-18.3908046);

select * from stocks_firstTECH;*/

-- drop table stocks_secondOHLC;
CREATE TABLE stocks_secondOHLC (
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    PX_OPEN DOUBLE DEFAULT NULL,
    PX_HIGH DOUBLE DEFAULT NULL,
    PX_LOW DOUBLE DEFAULT NULL,
    PX_CLOSE DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock)
);

-- drop table stocks_secondTECH;
CREATE TABLE stocks_secondTECH (
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    ATR DOUBLE DEFAULT NULL,
    BB_MA DOUBLE DEFAULT NULL,
    BB_UPPER DOUBLE DEFAULT NULL,
    BB_LOWER DOUBLE DEFAULT NULL,
    BB_WIDTH DOUBLE DEFAULT NULL,
    BB_PERCENT DOUBLE DEFAULT NULL,
    CMCI DOUBLE DEFAULT NULL,
    DMI_PLUS DOUBLE DEFAULT NULL,
    DMI_MINUS DOUBLE DEFAULT NULL,
    ADX DOUBLE DEFAULT NULL,
    ADXR DOUBLE DEFAULT NULL,
    EMAVG DOUBLE DEFAULT NULL,
    FEAR_GREED DOUBLE DEFAULT NULL,
    HURST DOUBLE DEFAULT NULL,
    MIN DOUBLE DEFAULT NULL,
    MAX DOUBLE DEFAULT NULL,
    MM_RETRACEMENT DOUBLE DEFAULT NULL,
    MOMENTUM DOUBLE DEFAULT NULL,
    MOM_MA DOUBLE DEFAULT NULL,
    MACD DOUBLE DEFAULT NULL,
    MACD_SIGNAL DOUBLE DEFAULT NULL,
    MACD_DIFF DOUBLE DEFAULT NULL,
    MAE_MIDDLE DOUBLE DEFAULT NULL,
    MAE_UPPER DOUBLE DEFAULT NULL,
    MAE_LOWER DOUBLE DEFAULT NULL,
    MAOsc DOUBLE DEFAULT NULL,
    MAO_SIGNAL DOUBLE DEFAULT NULL,
    MAO_DIFF DOUBLE DEFAULT NULL,
    PTPS DOUBLE DEFAULT NULL,
    ROC DOUBLE DEFAULT NULL,
    RSI DOUBLE DEFAULT NULL,
    SMAVG DOUBLE DEFAULT NULL,
    TAS_K DOUBLE DEFAULT NULL,
    TAS_D DOUBLE DEFAULT NULL,
    TAS_DS DOUBLE DEFAULT NULL,
    TAS_DSS DOUBLE DEFAULT NULL,
    TRENDER_UP DOUBLE DEFAULT NULL,
    TRENDER_DN DOUBLE DEFAULT NULL,
    TMAVG DOUBLE DEFAULT NULL,
    VMAVG DOUBLE DEFAULT NULL,
    WMAVG DOUBLE DEFAULT NULL,
    WLPR DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock),
    FOREIGN KEY (Dates , Stock)
        REFERENCES stocks_secondOHLC (Dates , Stock)
);

-- read the csv file
/*LOAD DATA INFILE "D:/FYP/Bloomberg data/ticker2(OHLC)_separate.csv"
  INTO TABLE stocks_secondOHLC
  fields terminated BY ',' lines terminated BY '\n'IGNORE 1 LINES;
  
LOAD DATA INFILE "D:/FYP/Bloomberg data/ticker2(TECH)_separate.csv"
  INTO TABLE stocks_secondTECH
  fields terminated BY ',' lines terminated BY '\n'IGNORE 1 LINES;*/

-- drop table stocks_thirdOHLC;
CREATE TABLE stocks_thirdOHLC (
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    PX_OPEN DOUBLE DEFAULT NULL,
    PX_HIGH DOUBLE DEFAULT NULL,
    PX_LOW DOUBLE DEFAULT NULL,
    PX_CLOSE DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock)
);

-- drop table stocks_thirdTECH;
CREATE TABLE stocks_thirdTECH (
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    ATR DOUBLE DEFAULT NULL,
    BB_MA DOUBLE DEFAULT NULL,
    BB_UPPER DOUBLE DEFAULT NULL,
    BB_LOWER DOUBLE DEFAULT NULL,
    BB_WIDTH DOUBLE DEFAULT NULL,
    BB_PERCENT DOUBLE DEFAULT NULL,
    CMCI DOUBLE DEFAULT NULL,
    DMI_PLUS DOUBLE DEFAULT NULL,
    DMI_MINUS DOUBLE DEFAULT NULL,
    ADX DOUBLE DEFAULT NULL,
    ADXR DOUBLE DEFAULT NULL,
    EMAVG DOUBLE DEFAULT NULL,
    FEAR_GREED DOUBLE DEFAULT NULL,
    HURST DOUBLE DEFAULT NULL,
    MIN DOUBLE DEFAULT NULL,
    MAX DOUBLE DEFAULT NULL,
    MM_RETRACEMENT DOUBLE DEFAULT NULL,
    MOMENTUM DOUBLE DEFAULT NULL,
    MOM_MA DOUBLE DEFAULT NULL,
    MACD DOUBLE DEFAULT NULL,
    MACD_SIGNAL DOUBLE DEFAULT NULL,
    MACD_DIFF DOUBLE DEFAULT NULL,
    MAE_MIDDLE DOUBLE DEFAULT NULL,
    MAE_UPPER DOUBLE DEFAULT NULL,
    MAE_LOWER DOUBLE DEFAULT NULL,
    MAOsc DOUBLE DEFAULT NULL,
    MAO_SIGNAL DOUBLE DEFAULT NULL,
    MAO_DIFF DOUBLE DEFAULT NULL,
    PTPS DOUBLE DEFAULT NULL,
    ROC DOUBLE DEFAULT NULL,
    RSI DOUBLE DEFAULT NULL,
    SMAVG DOUBLE DEFAULT NULL,
    TAS_K DOUBLE DEFAULT NULL,
    TAS_D DOUBLE DEFAULT NULL,
    TAS_DS DOUBLE DEFAULT NULL,
    TAS_DSS DOUBLE DEFAULT NULL,
    TRENDER_UP DOUBLE DEFAULT NULL,
    TRENDER_DN DOUBLE DEFAULT NULL,
    TMAVG DOUBLE DEFAULT NULL,
    VMAVG DOUBLE DEFAULT NULL,
    WMAVG DOUBLE DEFAULT NULL,
    WLPR DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock),
    FOREIGN KEY (Dates , Stock)
        REFERENCES stocks_thirdOHLC (Dates , Stock)
);

-- read the csv file
/*LOAD DATA INFILE "D:/FYP/Bloomberg data/ticker3(OHLC)_separate.csv"
  INTO TABLE stocks_thirdOHLC
  fields terminated BY ',' lines terminated BY '\n'IGNORE 1 LINES;
  
LOAD DATA INFILE "D:/FYP/Bloomberg data/ticker3(TECH)_separate.csv"
  INTO TABLE stocks_thirdTECH
  fields terminated BY ',' lines terminated BY '\n'IGNORE 1 LINES;*/
  
-- drop table stocks_forthOHLC;
CREATE TABLE stocks_forthOHLC (
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    PX_OPEN DOUBLE DEFAULT NULL,
    PX_HIGH DOUBLE DEFAULT NULL,
    PX_LOW DOUBLE DEFAULT NULL,
    PX_CLOSE DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock)
);

-- drop table stocks_forthTECH;
CREATE TABLE stocks_forthTECH (
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    ATR DOUBLE DEFAULT NULL,
    BB_MA DOUBLE DEFAULT NULL,
    BB_UPPER DOUBLE DEFAULT NULL,
    BB_LOWER DOUBLE DEFAULT NULL,
    BB_WIDTH DOUBLE DEFAULT NULL,
    BB_PERCENT DOUBLE DEFAULT NULL,
    CMCI DOUBLE DEFAULT NULL,
    DMI_PLUS DOUBLE DEFAULT NULL,
    DMI_MINUS DOUBLE DEFAULT NULL,
    ADX DOUBLE DEFAULT NULL,
    ADXR DOUBLE DEFAULT NULL,
    EMAVG DOUBLE DEFAULT NULL,
    FEAR_GREED DOUBLE DEFAULT NULL,
    HURST DOUBLE DEFAULT NULL,
    MIN DOUBLE DEFAULT NULL,
    MAX DOUBLE DEFAULT NULL,
    MM_RETRACEMENT DOUBLE DEFAULT NULL,
    MOMENTUM DOUBLE DEFAULT NULL,
    MOM_MA DOUBLE DEFAULT NULL,
    MACD DOUBLE DEFAULT NULL,
    MACD_SIGNAL DOUBLE DEFAULT NULL,
    MACD_DIFF DOUBLE DEFAULT NULL,
    MAE_MIDDLE DOUBLE DEFAULT NULL,
    MAE_UPPER DOUBLE DEFAULT NULL,
    MAE_LOWER DOUBLE DEFAULT NULL,
    MAOsc DOUBLE DEFAULT NULL,
    MAO_SIGNAL DOUBLE DEFAULT NULL,
    MAO_DIFF DOUBLE DEFAULT NULL,
    PTPS DOUBLE DEFAULT NULL,
    ROC DOUBLE DEFAULT NULL,
    RSI DOUBLE DEFAULT NULL,
    SMAVG DOUBLE DEFAULT NULL,
    TAS_K DOUBLE DEFAULT NULL,
    TAS_D DOUBLE DEFAULT NULL,
    TAS_DS DOUBLE DEFAULT NULL,
    TAS_DSS DOUBLE DEFAULT NULL,
    TRENDER_UP DOUBLE DEFAULT NULL,
    TRENDER_DN DOUBLE DEFAULT NULL,
    TMAVG DOUBLE DEFAULT NULL,
    VMAVG DOUBLE DEFAULT NULL,
    WMAVG DOUBLE DEFAULT NULL,
    WLPR DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock),
    FOREIGN KEY (Dates , Stock)
        REFERENCES stocks_forthOHLC (Dates , Stock)
);

/*LOAD DATA INFILE "D:/FYP/Bloomberg data/ticker4(OHLC)_separate.csv"
  INTO TABLE stocks_forthOHLC
  fields terminated BY ',' lines terminated BY '\n'IGNORE 1 LINES;
  
LOAD DATA INFILE "D:/FYP/Bloomberg data/ticker4(TECH)_separate.csv"
  INTO TABLE stocks_forthTECH
  fields terminated BY ',' lines terminated BY '\n'IGNORE 1 LINES;*/
  
CREATE TABLE OHLC_PREDICT (
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    PX_OPEN DOUBLE DEFAULT NULL,
    PX_HIGH DOUBLE DEFAULT NULL,
    PX_LOW DOUBLE DEFAULT NULL,
    PX_CLOSE DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock)
);

CREATE TABLE TECH_PREDICT(
    Dates VARCHAR(20) NOT NULL,
    Stock VARCHAR(20) NOT NULL,
    ATR DOUBLE DEFAULT NULL,
    BB_MA DOUBLE DEFAULT NULL,
    BB_UPPER DOUBLE DEFAULT NULL,
    BB_LOWER DOUBLE DEFAULT NULL,
    BB_WIDTH DOUBLE DEFAULT NULL,
    BB_PERCENT DOUBLE DEFAULT NULL,
    CMCI DOUBLE DEFAULT NULL,
    DMI_PLUS DOUBLE DEFAULT NULL,
    DMI_MINUS DOUBLE DEFAULT NULL,
    ADX DOUBLE DEFAULT NULL,
    ADXR DOUBLE DEFAULT NULL,
    EMAVG DOUBLE DEFAULT NULL,
    FEAR_GREED DOUBLE DEFAULT NULL,
    HURST DOUBLE DEFAULT NULL,
    MIN DOUBLE DEFAULT NULL,
    MAX DOUBLE DEFAULT NULL,
    MM_RETRACEMENT DOUBLE DEFAULT NULL,
    MOMENTUM DOUBLE DEFAULT NULL,
    MOM_MA DOUBLE DEFAULT NULL,
    MACD DOUBLE DEFAULT NULL,
    MACD_SIGNAL DOUBLE DEFAULT NULL,
    MACD_DIFF DOUBLE DEFAULT NULL,
    MAE_MIDDLE DOUBLE DEFAULT NULL,
    MAE_UPPER DOUBLE DEFAULT NULL,
    MAE_LOWER DOUBLE DEFAULT NULL,
    MAOsc DOUBLE DEFAULT NULL,
    MAO_SIGNAL DOUBLE DEFAULT NULL,
    MAO_DIFF DOUBLE DEFAULT NULL,
    PTPS DOUBLE DEFAULT NULL,
    ROC DOUBLE DEFAULT NULL,
    RSI DOUBLE DEFAULT NULL,
    SMAVG DOUBLE DEFAULT NULL,
    TAS_K DOUBLE DEFAULT NULL,
    TAS_D DOUBLE DEFAULT NULL,
    TAS_DS DOUBLE DEFAULT NULL,
    TAS_DSS DOUBLE DEFAULT NULL,
    TRENDER_UP DOUBLE DEFAULT NULL,
    TRENDER_DN DOUBLE DEFAULT NULL,
    TMAVG DOUBLE DEFAULT NULL,
    VMAVG DOUBLE DEFAULT NULL,
    WMAVG DOUBLE DEFAULT NULL,
    WLPR DOUBLE DEFAULT NULL,
    PRIMARY KEY (Dates , Stock),
    FOREIGN KEY (Dates , Stock) REFERENCES OHLC_PREDICT(Dates , Stock)
);